sap.ui.define(["sap/ui/core/mvc/Controller","chocomint/utils/constants","chocomint/utils/types/EmailType","chocomint/components/BetterToast"],(e,t,a,r)=>{"use strict";let o;let i;return e.extend("chocomint.controller.Employee",{onInit(){o=this.getOwnerComponent().getRouter();o.getRoute(t.EMPLOYEE_INFO).attachPatternMatched(this._renderDetail,this);o.initialize();console.log(this.getView().getModel())},onSubmitForm:function(e){let t=true;this.getView().byId("FormEmplDetail").getControlsByFieldGroupId("isRequired").forEach(function(e){if(e.getRequired&&e.getRequired()){var a=e.getValue?e.getValue():e.getSelectedKey();if(!a){e.setValueState("Error");e.setValueStateText("Required");t=false}else{e.setValueState("None");e.setValueStateText("")}}});if(!t)return;const a=this.getView().getModel();a.submitBatch("updateGroup").then(()=>{r.success("Update Successfully")}).catch(function(e){r.error(e.message)})},onCalculateSalary(e){const t=this.getView().getModel();let a=this.getView().getModel().bindContext("/calSalary(...)");a.setParameter("id",i);a.invoke().then(()=>{t.refresh();r.success("Employee's Salary has been recalculated")}).catch(e=>{r.error(e.message)})},_validateInput:function(e){var t="None";var a=false;var r=e.getBinding("value");try{r.getType().validateValue(e.getValue())}catch(e){t="Error";a=true}e.setValueState(t);return a},_renderDetail:async function e(t){i=t.getParameter("arguments").id;const a=this.getView().byId("FormEmplDetail");const r=a.bindElement({path:`/Employees(${i})`,parameters:{$$updateGroupId:"updateGroup",operationMode:"Server",autoExpandSelect:false},events:{dataReceived:async e=>{const t=e.getParameters();t.error&&o.getTargets().display("Target404")}}}).getModel();console.log(r)},EmailType:a})});
//# sourceMappingURL=Employee.controller.js.map